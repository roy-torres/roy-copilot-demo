<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Dynamic Dashboard & DOI Sort UI</title>
  <style>
    body { margin:0; font-family:sans-serif; background:#f4f4f4; }
    header { background:#00446b; color:#fff; padding:12px; display:flex; align-items:center; }
    header h1 { flex:1; font-size:18px; margin:0; }
    header button { margin-left:8px; padding:6px 12px; border:none; border-radius:4px; cursor:pointer; }
    #dashboard, #listView { padding:12px; display:none; }
    #dashboard.active, #listView.active { display:block; }

    /* Dashboard sections */
    .section { background:#fff; margin-bottom:12px; border-radius:6px; padding:12px; }
    .section h2 { margin:0 0 8px; font-size:16px; }
    .tiles { display:flex; overflow-x:auto; gap:8px; }
    .tile { min-width:100px; background:#e6f7ff; padding:8px; border-radius:4px; text-align:center; }
    .hero { background:#ffe7ba; padding:16px; border-radius:6px; text-align:center; font-weight:bold; }

    /* List view */
    .list-item { background:#fff; margin-bottom:8px; padding:12px; border-radius:6px; display:flex; justify-content:space-between; }
    .list-item span:first-child { font-weight:500; }

  </style>
</head>
<body>

  <header>
    <h1>Life Time Evanston AI UI</h1>
    <button id="showDash">Dashboard View</button>
    <button id="showList">List View</button>
  </header>

  <div style="padding:12px; text-align:right;">
    <button id="reorder">ü§ñ AI Reorder Rubrics</button>
  </div>

  <!-- Dashboard View -->
  <div id="dashboard" class="active">
    <div id="topTrainers" class="section">
      <h2>üèÜ Top Trainers</h2>
      <div class="tiles" id="trainersTiles"></div>
    </div>
    <div id="recentConversions" class="section">
      <h2>üí∞ Recent Conversions</h2>
      <div class="tiles" id="conversionsTiles"></div>
    </div>
    <div id="atRiskMembers" class="section">
      <h2>‚ö†Ô∏è At-Risk Members</h2>
      <div class="tiles" id="atRiskTiles"></div>
    </div>
    <div id="revenueTrends" class="section">
      <h2>üìà Revenue Trend</h2>
      <div class="hero" id="revenueHero"></div>
    </div>
  </div>

  <!-- List View -->
  <div id="listView">
    <h2>üìã Flat List Sorted by DOI Score</h2>
    <div id="listItems"></div>
  </div>

  <script>
    // Sample data
    const trainers = [
      { name:'Tom Wilson', doi: 75 },
      { name:'Mark Torres', doi: 60 },
      { name:'Alice Kim', doi: 82 },
      { name:'Jamal Brown', doi: 50 }
    ];
    const conversions = [
      { who:'Alice Kim', revenue:760, doi:88 },
      { who:'Tom Wilson', revenue:1200, doi:72 },
      { who:'Jamal Brown', revenue:600, doi:65 }
    ];
    const atRisk = [
      { who:'Bob Smith', risk:0.34, doi:70 },
      { who:'Sara Lee', risk:0.42, doi:80 }
    ];
    const revenueTrend = { today:2300, target:2500 };

    // Render dashboard
    function renderDashboard() {
      const tcont = document.getElementById('trainersTiles');
      tcont.innerHTML = '';
      trainers.forEach(t => {
        const div = document.createElement('div');
        div.className = 'tile';
        div.innerHTML = `${t.name}<br>DOI ${t.doi}`;
        tcont.append(div);
      });

      const ccont = document.getElementById('conversionsTiles');
      ccont.innerHTML = '';
      conversions.forEach(c => {
        const div = document.createElement('div');
        div.className = 'tile';
        div.innerHTML = `${c.who}<br>$${c.revenue}`;
        ccont.append(div);
      });

      const rcont = document.getElementById('atRiskTiles');
      rcont.innerHTML = '';
      atRisk.forEach(a => {
        const div = document.createElement('div');
        div.className = 'tile';
        div.innerHTML = `${a.who}<br>${Math.round(a.risk*100)}% risk`;
        rcont.append(div);
      });

      const hero = document.getElementById('revenueHero');
      const today = revenueTrend.today;
      const target = revenueTrend.target;
      hero.textContent = `$${today} / $${target} daily target`;
    }

    // Render list view
    function renderList() {
      const list = [...trainers.map(t=>({label:t.name, doi:t.doi})),
                    ...conversions.map(c=>({label:c.who+' ($'+c.revenue+')', doi:c.doi})),
                    ...atRisk.map(a=>({label:a.who+' (risk '+Math.round(a.risk*100)+'%)', doi:a.doi}))];
      // sort descending by doi
      list.sort((a,b)=>b.doi - a.doi);

      const cont = document.getElementById('listItems');
      cont.innerHTML = '';
      list.forEach(item => {
        const div = document.createElement('div');
        div.className = 'list-item';
        div.innerHTML = `<span>${item.label}</span><span>DOI ${item.doi}</span>`;
        cont.append(div);
      });
    }

    // Toggle views
    document.getElementById('showDash').onclick = () => {
      document.getElementById('dashboard').classList.add('active');
      document.getElementById('listView').classList.remove('active');
    };
    document.getElementById('showList').onclick = () => {
      document.getElementById('dashboard').classList.remove('active');
      document.getElementById('listView').classList.add('active');
      renderList();
    };

    // Stub AI reorder rubrics
    document.getElementById('reorder').onclick = () => {
      // stub: reorder sections by a fake "AI" ranking
      const order = ['atRiskMembers','topTrainers','recentConversions','revenueTrends'];
      const dash = document.getElementById('dashboard');
      order.forEach(id => dash.appendChild(document.getElementById(id)));
    };

    // initial render
    renderDashboard();
  </script>
</body>
</html>
